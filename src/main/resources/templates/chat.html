<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ë¹„ë°€ ì±„íŒ…ë°©</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        /* ë””ìŠ¤ì½”ë“œ ìŠ¤íƒ€ì¼ ë‹¤í¬ í…Œë§ˆ */
        body {
            background-color: #36393f; /* ì–´ë‘ìš´ íšŒìƒ‰ ë°°ê²½ */
            color: #dcddde;           /* ì—°í•œ íšŒìƒ‰ ê¸€ì */
            font-family: 'gg sans', 'Noto Sans KR', sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
        }

        /* ì±„íŒ…ì°½ ì „ì²´ ì»¨í…Œì´ë„ˆ */
        #chat-container {
            width: 100%;
            max-width: 800px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: #36393f;
        }

        /* ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸ ì˜ì—­ */
        #messageArea {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            list-style-type: none;
            margin: 0;
        }

        /* ìŠ¤í¬ë¡¤ë°” ë””ìì¸ (í¬ë¡¬ ê¸°ì¤€) */
        #messageArea::-webkit-scrollbar { width: 8px; }
        #messageArea::-webkit-scrollbar-thumb { background-color: #202225; border-radius: 4px; }

        /* ê°œë³„ ë©”ì‹œì§€ í–‰ (í”„ë¡œí•„ + ë‚´ìš©) */
        .message-row {
            display: flex;
            margin-bottom: 20px; /* ë©”ì‹œì§€ ê°„ ê°„ê²© */
            align-items: flex-start;
        }

        /* í”„ë¡œí•„ ì´ë¯¸ì§€ (ì›í˜•) */
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #7289da; /* ê¸°ë³¸ íŒŒë€ìƒ‰ */
            margin-right: 16px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 18px;
        }

        /* ë©”ì‹œì§€ ë‚´ìš© ì»¨í…Œì´ë„ˆ */
        .message-content {
            display: flex;
            flex-direction: column;
        }

        /* ì´ë¦„ê³¼ ì‹œê°„ */
        .message-header {
            display: flex;
            align-items: baseline;
            margin-bottom: 4px;
        }

        .username {
            font-weight: bold;
            color: #ffffff;
            margin-right: 8px;
            cursor: pointer;
        }

        .username:hover { text-decoration: underline; }

        .timestamp {
            font-size: 12px;
            color: #72767d;
        }

        /* ì‹¤ì œ ë©”ì‹œì§€ í…ìŠ¤íŠ¸ */
        .message-text {
            font-size: 16px;
            line-height: 1.4;
            white-space: pre-wrap; /* ì¤„ë°”ê¿ˆ ìœ ì§€ */
        }

        /* ì…ë ¥ì°½ ì˜ì—­ (í•˜ë‹¨ ê³ ì •) */
        .input-area {
            background-color: #36393f;
            padding: 20px;
            border-top: 1px solid #2f3136;
        }

        .input-box {
            background-color: #40444b;
            border-radius: 8px;
            padding: 10px;
            display: flex;
            align-items: center;
        }

        #message {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-size: 15px;
            outline: none;
        }

        /* ë²„íŠ¼ë“¤ ê¾¸ë¯¸ê¸° */
        button {
            background-color: #5865f2; /* ë””ìŠ¤ì½”ë“œ ë³´ë¼ìƒ‰ */
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            margin-left: 10px;
            transition: background-color 0.2s;
        }
        button:hover { background-color: #4752c4; }

        /* ì•”í˜¸í™” ë°•ìŠ¤ ìŠ¤íƒ€ì¼ ë³€ê²½ */
        .secret-box {
            border: 1px solid #faa61a;
            color: #faa61a;
            background: rgba(250, 166, 26, 0.1);
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            display: inline-block;
        }

        .img-preview {
            max-width: 300px;
            border-radius: 8px;
            margin-top: 5px;
        }
    </style>
</head>
<body>


<div id="chat-container">
    <div style="color:white; padding:10px; text-align:center; background:#202225;">
        í˜„ì¬ ì±„íŒ…ë°©: <span id="roomNameDisplay" style="font-weight:bold; color:#5865F2;"></span>
    </div>

    <script>
        document.getElementById('roomNameDisplay').innerText = window.location.pathname.split("/").pop();
    </script>
    <ul id="messageArea">
    </ul>

    <div class="input-area">
        <div class="input-box">
            <input type="file" id="imageInput" accept="image/*" style="display:none;">
            <button onclick="document.getElementById('imageInput').click()" style="background:#40444b; color:#b9bbbe; padding:5px;">+</button>

            <input type="text" id="message" placeholder="ë©”ì‹œì§€ ë³´ë‚´ê¸°" onkeypress="if(event.keyCode==13) send()">

            <label style="margin-left:10px; font-size:12px; cursor:pointer;">
                <input type="checkbox" id="encryptToggle"> ğŸ”’
            </label>

            <button onclick="send()">ì „ì†¡</button>
        </div>
        <div id="fileNameDisplay" style="font-size:12px; color:#72767d; margin-top:5px;"></div>
    </div>
</div>

<script src="/main.js"></script>
<script>
    document.getElementById('imageInput').addEventListener('change', function(){
        var fileName = this.files[0] ? this.files[0].name : '';
        document.getElementById('fileNameDisplay').innerText = fileName ? 'íŒŒì¼: ' + fileName : '';
    });
</script>
</body>
</html>